{{ define "main" }} {{ partial "back_link.html" .}}

<article class="h-entry prose prose-gray dark:prose-invert">
  <header class="p-name mb-14">
    <h2 class="p-name">{{ .Title }}</h2>
  </header>

  {{ if in .Params.tags "mentoring-guides" }}
  <section
    class="prose prose-gray mb-20 rounded border p-3 text-sm dark:prose-invert"
  >
    <p>
      Hey! This is one of my <a href="/mentoring">mentoring guides</a>; short
      reflections on my experience in the UX industry. I'm unable to take on all
      mentoring requests I receive, but I hope this guide may help you take a
      next step.
    </p>
  </section>
  {{ end }} {{ if .Params.toc }}
  <aside {{ if .Params.tocBorder }} class="toc" {{ end }}>
    {{ .TableOfContents }}
  </aside>
  {{ end }}

  <div class="e-content">
    <!-- https://github.com/gohugoio/hugo/issues/3606#issuecomment-634092082 -->
    <!-- {{ .Content | replaceRE "\\[\\[([^/]+)\\]\\]" "<a href=\"${1}.html\">$1</a>" |safeHTML }}  -->

    {{- partial "content_wikified" . -}}
  </div>
</article>

<hr class="my-20" />

<footer class="mt-20">
  <h3 class="text-xl font-medium">More on {{ .Params.connection }}</h3>
  {{ $connection := .Params.connection }}
  <ul class="feed mt-10">
    {{ range .Site.Pages }} {{ if in .Params.tags $connection }}
    <li class="group flex">
      <div class="mt-[4px] flex w-10 flex-none flex-col">
        <div class="">
          {{ if .Params.photo }} {{ partial "post_type_photo.html" . }} {{ else
          if .Params.replyTo }} {{ partial "post_type_reply.html" . }} {{ else
          if .Params.likeOf }} {{ partial "post_type_like.html" . }} {{ else if
          .Title }} {{ partial "post_type_post.html" . }} {{ else }} {{ partial
          "post_type_note.html" . }} {{ end }}
        </div>
        <div class="ml-2.5 grow border-l group-last:border-0">&nbsp;</div>
      </div>
      <div class="grow pb-5">
        {{ if eq .Type "posts" }}

        <a href="{{ .Permalink }}" class="block">
          <h2>{{.Title}}</h2>
          <time class="text-secondary mb-3 block text-sm"
            >{{- (.Date | time.Format site.Params.theme_config.date_format_full)
            }}</time
          >
          <content class="prose prose-gray dark:prose-invert">
            {{ .Summary | markdownify }}
          </content>
        </a>

        {{ end }} {{ if eq .Type "updates" }}

        <div class="prose prose-gray dark:prose-invert">
          {{ if .Params.photo }}
          <p class="mb-5"><code>ALT</code> {{ .Params.alt }}</p>
          {{ end }} {{ if .Params.replyTo }}
          <p class="u-in-reply-to mt-0">
            Replied to
            <a
              href="{{.Params.replyTo}}"
              rel="in-reply-to"
              class="u-in-reply-to text-url break-all"
              target="_blank"
            >
              {{ if .Params.replyToName }} {{.Params.replyToName}} {{ else }}
              {{.Params.replyTo}} {{ end }}
            </a>
          </p>
          {{ end }} {{ if .Params.likeOf }}
          <p class="mt-0">
            Liked
            <a
              href="{{.Params.likeOf}}"
              class="u-like-of text-url break-all"
              target="_blank"
              >{{.Params.likeOf}}</a
            >
          </p>
          {{ end }}

          <content> {{ .Content }} </content>
        </div>
        {{ end }}
        <div class="mb-7 mt-3">
          <a href="{{ .Permalink }}" class="button">Continue reading</a>
        </div>
      </div>
    </li>
    {{ end }} {{ end }}
  </ul>
</footer>

{{ end }}

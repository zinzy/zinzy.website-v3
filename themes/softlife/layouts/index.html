{{ define "main" }}

<section class="mt-10 md:mt-20 container">

  {{ $posts := where .Site.RegularPages "Type" "posts"  }}
  {{ $shorts := where .Site.RegularPages "Type" "shorts"  }}
  {{ $filtered := union $posts $shorts }}

  {{ $feed := $filtered }}
  {{ $sortedfeed := $feed.ByDate.Reverse  }}
  {{ $paginator := .Paginate $sortedfeed 7 }}
  {{ range $paginator.Pages }}

  <article class="mb-20"> 
      <time class="dt-published text-secondary font-medium uppercase text-xs mb-5 block" datetime="{{ .Date }}">
        <a href="{{ .Permalink }}">{{ .Date | time.Format site.Params.theme_config.date_format_full }}</a>
      </time> 
      {{ if .Params.title }} 
      
        <h2 class="text-2xl mt-0 mb-3"><a href="{{ .Permalink }}">{{ .Params.title }}</a></h2>
        

        <div class="prose prose-gray dark:prose-invert">
        {{ .Summary }} <a href="{{ .Permalink }}">(Continue)</a>
        </div>
          {{ else }} 


        <div class="prose prose-gray dark:prose-invert">

          {{ if .Params.replyTo }}
          {{ if .Params.rsvp }}
            <p>
              {{ if eq .Params.rsvp "yes" }}<data class="p-rsvp" value="YES">Is going</data> to 
              {{ else if eq .Params.rsvp "maybe" }}<data class="p-rsvp" value="Maybe">Might go</data> to 
              {{ else if eq .Params.rsvp "no" }}<data class="p-rsvp" value="no">Unable to go</data> to 
              {{ else if eq .Params.rsvp "interested" }}<data class="p-rsvp" value="interested">Is interested</data> in 
              {{ end }}

              <a
              href="{{.Params.replyTo}}"
              rel="in-reply-to"
              class="u-in-reply-to text-url break-all font-normal underline"
              target="_blank"
              >
              {{ if .Params.replyToName }} {{.Params.replyToName}} {{ else }}
              {{.Params.replyTo}} {{ end }}
              </a>
            </p>

            {{ else }}
            
            <p class="u-in-reply-to mt-0 mb-3">
              Replied to
              <a
                href="{{.Params.replyTo}}"
                rel="in-reply-to"
                class="u-in-reply-to text-url break-all font-normal underline"
                target="_blank"
              >
                {{ if .Params.replyToName }} {{.Params.replyToName | markdownify }} {{ else }}
                {{.Params.replyTo}} {{ end }}
              </a>
            </p>
          {{ end }}
          
          {{ else if .Params.likeOf }}
          <p class="mt-0 mb-5">
            Liked
            <a
              href="{{.Params.likeOf}}"
              class="u-like-of text-url break-all  font-normal underline"
              target="_blank"
              >
              {{ if .Params.likeOfName }} {{.Params.likeOfName | markdownify}} {{ else }}
              {{.Params.likeOf}} {{ end }}</a
            >
          </p>
          {{ end }}</div>


        <div class="prose prose-gray dark:prose-invert">{{ .Content }}</div>
      {{ end }} 
    <div class="mt-5">
      {{ partial "tags.html" .}}
    </div>
  </article>

  {{ end }}

{{ partial "pagination.html" . }}
</section>
{{ end }}

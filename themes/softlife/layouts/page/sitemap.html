{{ define "main" }} {{ partial "back_link.html" .}}

<article class="h-entry">
  <header class="prose prose-gray dark:prose-invert">
    <p class="text-secondary mb-0 text-sm">{{ .Title }}</p>
    <h2 class="p-name my-2 text-2xl">{{ .Description }}</h2>
  </header>

  <!-- 
  <div
    class="e-content prose prose-gray mt-20 dark:prose-invert"
  >
    {{ .Content }}
  </div> -->

  <section class="mt-20">
    <h3 class="text-xl font-medium">What I write</h3>
    <ul class="mt-5">
      <li class="group m-0 mb-3 mr-3 inline-block p-0">
        <a
          href="/shorts"
          class="flex rounded-full border px-3 leading-7 text-xs font-medium no-underline transition-all hover:border-transparent hover:bg-pink-50 group-hover:text-pink-500 dark:hover:border-transparent dark:hover:bg-pink-300/10 dark:group-hover:text-pink-300"
          >Shorts
        </a>
      </li>
      {{range sort ($.Site.GetPage "taxonomyTerm" "categories").Pages }}
      <li class="group m-0 mb-3 mr-3 inline-block p-0">
        <a
          href="{{.Permalink}}"
          class="flex rounded-full border px-3 leading-7 text-xs font-medium no-underline transition-all hover:border-transparent hover:bg-pink-50 group-hover:text-pink-500 dark:hover:border-transparent dark:hover:bg-pink-300/10 dark:group-hover:text-pink-300"
          >{{.Title}}
        </a>
      </li>
      {{end}}
    </ul>
  </section>

  <section class="mt-20">
    <h3 class="text-xl font-medium">Pages on this website</h3>

    {{ $pages := where .Site.RegularPages "Type" "page" }}

    <ul class="mt-5">
      {{ range $pages }}
      <li class="border-t py-3">
        <a class="w-full" href="{{ .Permalink }}">
          <span class="font-medium">{{ .Title }}</span>
          <span class="text-secondary text-sm">{{ .Description }}</span>
        </a>
      </li>
      {{ end }}
    </ul>
  </section>

  <section class="mt-20">
    <h3 class="text-xl font-medium">Topics</h3>
    <div>
      <!-- Retrieved this snippet from https://discourse.gohugo.io/t/tag-cloud/6335 -->
      {{ $tags := $.Site.Taxonomies.tags.ByCount }} {{ $v1 := where $tags
      "Count" ">=" 3 }} {{ $v2 := where $v1 "Term" "not in" (slice "hugo" "tags"
      "rss") }}
      <ul class="mt-5">
        {{ range $v2 }} {{ if .Term }} {{ $tagURL := printf "tags/%s" .Term |
        relURL }}
        <li class="group m-0 mb-3 mr-3 inline-block p-0">
          <a
            href="{{ $tagURL }}"
            class="flex rounded-full border px-3 leading-7 text-xs font-medium leading-8 no-underline transition-all hover:border-transparent hover:bg-pink-50 group-hover:text-pink-500 dark:hover:border-transparent dark:hover:bg-pink-300/10 dark:group-hover:text-pink-300"
            >{{ .Term }}
            <span class="text-secondary ml-2 inline-block"
              >{{ .Count }}</span
            ></a
          >
        </li>
        {{ end }} {{ end }}
      </ul>
    </div>
  </section>

  {{ partial "backlinks.html" . }}
</article>
{{ end }}
